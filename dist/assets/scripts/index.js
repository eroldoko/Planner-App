!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="assets/scripts/",s(s.s=0)}([function(e,t,s){"use strict";s.r(t),s.d(t,"App",(function(){return l}));class i{constructor(e){this.id=e.id,this.title=e.title,this.text=e.text,this.idCheck=e.idCheck}createEl(){const e=document.createElement("li");return e.id=this.id,e.classList.add("card","task"),e.setAttribute("draggable",!0),e.innerHTML=`<input type="checkbox" id= "${this.idCheck}" />\n    <label for = "${this.idCheck}">\n      <span class="check-mark">&#10004;</span>\n      <span class="custom-checkbox"></span>\n    </label>\n    <h2> ${this.title} <span id = "icon"><i class="fas fa-chevron-circle-down"></i></span></h2>\n    <div class = "taskDiv invisible">\n    <textarea class = "taskArea" id="editTask" disabled> ${this.text}</textarea>\n    <button class="alt delete">Delete</button>\n    <button class="switch"></button>\n     <button class="edit">Edit</button>\n     </div>\n    `,e}}class n{static tasksActiveDbSave(e){localStorage.taskActiveData=JSON.stringify(e)}static tasksActiveDbLoad(){if(localStorage.taskActiveData){return JSON.parse(localStorage.taskActiveData)}return[]}static tasksIds(){if(localStorage.tasksIds){return JSON.parse(localStorage.tasksIds)}return[]}static tasksFinishedDbSave(e){localStorage.finishedTasks=JSON.stringify(e)}static tasksFinishedDbLoad(){if(localStorage.finishedTasks){return JSON.parse(localStorage.finishedTasks)}return[]}static domDbRender(){let e=document.querySelector("#active-tasks ul"),t=document.querySelector("#finished-tasks ul"),s=n.tasksActiveDbLoad();for(const t of s){const s=new i(t).createEl();e.prepend(s)}if(localStorage.finishedTasks){let e=n.tasksFinishedDbLoad();for(const s of e){const e=new i(s).createEl();t.appendChild(e)}}l.tasksInit()}}class a{constructor(e,t,s){this.id=e,this.type=s,this.updateTaskListsHandler=t,this.connectSwitchButton(s),this.connectDeleteButton(s),this.connectDrag(),this.connectEditButton(s),this.connectDropDown(e)}connectDrag(){document.getElementById(this.id).addEventListener("dragstart",e=>{e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"})}connectSwitchButton(e){const t=document.getElementById(this.id);let s=t.querySelector(".switch");s.replaceWith(s.cloneNode(!0)),s=t.querySelector(".switch"),s.textContent="active"===e?"Done":"Activate",s.addEventListener("click",this.updateTaskListsHandler)}editTask(e,t){const s=document.getElementById(e);let i=s.querySelector(".edit"),a=s.querySelector("#editTask");if("Edit"===i.textContent)a.disabled=!1,a.focus(),i.textContent="Ok";else if("Ok"===i.textContent&&"finished"===t){a.blur(),a.disabled=!0;let t=n.tasksFinishedDbLoad(),s=t.findIndex(t=>t.id===e);t[s].text=a.value.trim(),n.tasksFinishedDbSave(t),i.textContent="Edit"}else if("Ok"===i.textContent&&"active"===t){a.blur(),a.disabled=!0;let t=n.tasksActiveDbLoad(),s=t.findIndex(t=>t.id===e);t[s].text=a.value.trim(),n.tasksActiveDbSave(t),i.textContent="Edit"}console.log(i.textContent)}deleteTask(e,t){const s=document.querySelector(".del-modal"),i=document.querySelector("#backdrop");i.style.display="block",s.classList.add("visible"),console.log(i),s.querySelectorAll("button").forEach(a=>{"Cancel"===a.textContent?a.addEventListener("click",(function(){s.classList.remove("visible"),i.style.display="none"})):"Yes"===a.textContent&&(a.replaceWith(a.cloneNode(!0)),(a=s.querySelector("button:last-of-type")).addEventListener("click",(function(){s.classList.remove("visible"),i.style.display="none";if(document.getElementById(e).remove(),console.log(t),"finished"===t){let s=n.tasksFinishedDbLoad();console.log(t),console.log(s);let i=s.findIndex(t=>t.id===e);s.splice(i,1),n.tasksFinishedDbSave(s)}else if("active"===t){console.log(t);let s=n.tasksActiveDbLoad();console.log(s);let i=s.findIndex(t=>t.id===e);s.splice(i,1),n.tasksActiveDbSave(s)}})))})}dropDown(e){const t=document.getElementById(e),s=t.querySelector(".taskDiv");"taskDiv invisible"==s.className?(s.className="taskDiv visibleDiv",t.className="card task liVisible"):(s.className="taskDiv invisible",t.className="card task")}connectDeleteButton(e){document.getElementById(this.id).querySelector("button:first-of-type").addEventListener("click",this.deleteTask.bind(this,this.id,e))}connectEditButton(e){const t=document.getElementById(this.id);let s=t.querySelector(".edit");s.replaceWith(s.cloneNode(!0)),s=t.querySelector(".edit"),s.addEventListener("click",this.editTask.bind(this,this.id,e))}connectDropDown(){const e=document.getElementById(this.id);let t=e.querySelector("h2");t.replaceWith(t.cloneNode(!0)),t=e.querySelector("h2"),t.addEventListener("click",this.dropDown.bind(this,this.id))}}class c{constructor(e){this.finishedTasks=n.tasksFinishedDbLoad(),this.activeTasks=n.tasksActiveDbLoad(),this.tasks=[],this.type=e,this.removeCompleteBtnAct=document.querySelector(".remove-complete-btnAct"),this.removeCompleteBtnFin=document.querySelector(".remove-complete-btnFin"),this.removeCompleteBtnAct.addEventListener("click",this.clearCompleteActive.bind(this)),this.removeCompleteBtnFin.addEventListener("click",this.clearCompleteFinished.bind(this));const t=document.querySelectorAll(`#${e}-tasks li`);for(const e of t)this.tasks.push(new a(e.id,this.switchTask.bind(this,e.id),this.type));this.connectDroppable()}clearCompleteActive(){const e=document.querySelector("#active-tasks").querySelectorAll(".card"),t=document.querySelector(".del-modal"),s=document.querySelector("#backdrop");e.forEach(i=>{const a=i.querySelector("input").checked;if(a){let i=[];if(i.push(a),i.length>0){s.style.display="block",t.classList.add("visible"),t.querySelectorAll("button").forEach(i=>{"Cancel"===i.textContent?i.addEventListener("click",(function(){t.classList.remove("visible"),s.style.display="none"})):"Yes"===i.textContent&&(i.replaceWith(i.cloneNode(!0)),(i=t.querySelector("button:last-of-type")).addEventListener("click",(function(){t.classList.remove("visible"),s.style.display="none",e.forEach(e=>{if(e.querySelector("input").checked){e.remove(),console.log(e.id);let t=n.tasksActiveDbLoad();console.log(t);let s=t.findIndex(t=>t.id===e.id);t.splice(s,1),n.tasksActiveDbSave(t)}})})))})}}})}clearCompleteFinished(){const e=document.querySelector("#finished-tasks").querySelectorAll(".card"),t=document.querySelector(".del-modal"),s=document.querySelector("#backdrop");e.forEach(i=>{const a=i.querySelector("input").checked;if(a){let i=[];if(i.push(a),i.length>0){s.style.display="block",t.classList.add("visible"),t.querySelectorAll("button").forEach(i=>{"Cancel"===i.textContent?i.addEventListener("click",(function(){t.classList.remove("visible"),s.style.display="none"})):"Yes"===i.textContent&&(i.replaceWith(i.cloneNode(!0)),(i=t.querySelector("button:last-of-type")).addEventListener("click",(function(){t.classList.remove("visible"),s.style.display="none",e.forEach(e=>{if(e.querySelector("input").checked){e.remove(),console.log(e.id);let t=n.tasksFinishedDbLoad();console.log(t);let s=t.findIndex(t=>t.id===e.id);t.splice(s,1),n.tasksFinishedDbSave(t)}})})))})}}})}connectDroppable(){const e=document.querySelector(`#${this.type}-tasks ul`);e.addEventListener("dragenter",t=>{"text/plain"===t.dataTransfer.types[0]&&t.preventDefault(),e.parentElement.classList.add("droppable")}),e.addEventListener("dragover",e=>{"text/plain"===e.dataTransfer.types[0]&&e.preventDefault()}),e.addEventListener("dragleave",t=>{t.relatedTarget.closest(`#${this.type}-tasks ul`)!==e&&e.parentElement.classList.remove("droppable")}),e.addEventListener("drop",t=>{const s=t.dataTransfer.getData("text/plain");this.tasks.find(e=>e.id===s)||(document.getElementById(s).querySelector(".switch").click(),e.parentElement.classList.remove("droppable"))})}setSwitchHandlerFunction(e){this.switchHandler=e}addTask(e){if(this.tasks.push(e),function(e,t){const s=document.getElementById(e);document.querySelector(t).prepend(s),s.scrollIntoView({behavior:"smooth"})}(e.id,`#${this.type}-tasks ul`),"finished"==this.type){this.finishedTasks=n.tasksFinishedDbLoad(),this.activeTasks=n.tasksActiveDbLoad();let t=this.activeTasks.findIndex(t=>t.id===e.id);this.finishedTasks.push(this.activeTasks[t]),localStorage.finishedTasks=JSON.stringify(this.finishedTasks),this.activeTasks.splice(t,1),n.tasksActiveDbSave(this.activeTasks)}else if("active"==this.type){this.finishedTasks=n.tasksFinishedDbLoad(),this.activeTasks=n.tasksActiveDbLoad();let t=this.finishedTasks.findIndex(t=>t.id===e.id);this.activeTasks.push(this.finishedTasks[t]),n.tasksActiveDbSave(this.activeTasks),this.finishedTasks.splice(t,1),n.tasksFinishedDbSave(this.finishedTasks)}e.updateTaskListsHandler=this.switchTask.bind(this,e.id),e.connectSwitchButton(this.type),e.connectDeleteButton(this.type),e.connectEditButton(this.type)}switchTask(e){this.switchHandler(this.tasks.find(t=>t.id===e)),this.tasks=this.tasks.filter(t=>t.id!==e)}}class o{constructor(){this.backdrop=document.querySelector("#backdrop"),this.modal=document.querySelector(".modal"),this.addTaskModal=document.getElementById("addTaskModal"),this.addTaskModal.addEventListener("click",this.showModal.bind(this)),this.addTask=document.querySelector(".addTask"),this.cancelTask=document.querySelector(".cancelAdd"),this.cancelTask.addEventListener("click",this.hideModal.bind(this)),this.addTask.addEventListener("click",this.createTask.bind(this)),this.taskListActDom=document.querySelector("#active-tasks ul")}showModal(){this.backdrop.style.display="block",this.modal.classList.add("visible")}hideModal(){this.backdrop.style.display="none",this.modal.classList.remove("visible")}createTask(){const e=this.modal.querySelector("#title"),t=this.modal.querySelector("#textarea"),s=e.value,a=t.value;if(""==e.value)e.placeholder="Please provide the Task Title";else if(""==t.value)t.placeholder="Please provide the Task Text";else if(""!==e.value&&""!==t.value){let c,o=n.tasksActiveDbLoad(),d=n.tasksIds();d.length<1?(c=1,d.push(c),localStorage.tasksIds=JSON.stringify(d)):(c=d.length+1,d.push(c),localStorage.tasksIds=JSON.stringify(d));const r={id:(new Date).toString(),title:s,text:a,idCheck:c};o.push(r),n.tasksActiveDbSave(o);const h=new i(r).createEl();this.taskListActDom.prepend(h),l.tasksInit(),e.value="",t.value="",this.hideModal()}}}class l{static init(){n.domDbRender(),new o}static tasksInit(){const e=new c("active"),t=new c("finished");e.setSwitchHandlerFunction(t.addTask.bind(t)),t.setSwitchHandlerFunction(e.addTask.bind(e))}}l.init()}]);
//# sourceMappingURL=index.js.map